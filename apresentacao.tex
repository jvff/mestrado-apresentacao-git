\documentclass{beamer}

\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}

\mode<presentiation>{\usetheme{boxes}}

\setbeamertemplate{footline}[frame number]

\newenvironment{slide}{\begin{frame}{\insertsection}}{\end{frame}}

\title{Introdução ao Git}
\author{Janito Vaqueiro Ferreira Filho}
\institute{Universidade Estadual de Campinas}

\begin{document}

\begin{frame}
    \titlepage
\end{frame}

\begin{frame}
    \frametitle{Agenda}
    \tableofcontents
\end{frame}

\section{Introdução}
\begin{slide}
    \begin{itemize}
        \item Todo projeto contém artefatos
        \pause
        \item A complexidade de organizar esses artefatos depende de:
        \pause
            \begin{itemize}
                \item Número de artefatos
                \pause
                \item Sujeitabilidade a mudanças
                \pause
                \item Número de pessoas envolvidas
            \end{itemize}
    \end{itemize}
\end{slide}

\section{Motivação}
\begin{slide}
    A organização incorreta pode resultar em diversos problemas
    \begin{itemize}
        \pause
        \item Perda de artefatos
        \pause
        \item Perda da rastreabilidade
        \pause
        \item Perda da reprodutibilidade
        \pause
        \item Perda de coerência no uso dos artefatos entre os envolvidos
    \end{itemize}
\end{slide}

\section{Solução}
\begin{slide}
    Todas as soluções estão relacionadas a dois pontos chaves
    \begin{itemize}
        \pause
        \item Aumento da documentação
        \begin{itemize}
            \pause
            \item Rotular os artefatos
            \pause
            \item Descrever os artefatos
            \pause
            \item Registrar a evolução dos artefatos
        \end{itemize}
        \pause
        \item Aumento da redundância
        \begin{itemize}
            \pause
            \item Manter cópias dos artefatos
            \pause
            \item Manter cópias do estado dos artefatos em instantes de tempo
                \pause (versões dos artefatos)
            \pause
            \item Manter cópias da documentação e dos registros
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Sistema de Controle de Versionamento}
\begin{slide}
    \begin{itemize}
        \item Ferramenta para auxiliar na organização de artefatos digitais
            \pause (arquivos)
        \pause
        \item Foco em controle de versões dos artefatos
        \pause
        \item Foco em facilitar o uso por diversas pessoas
        \pause
        \item \textbf{Repositórios} são conjuntos de artefatos e registros de um
            mesmo projeto organizados de forma unificada
    \end{itemize}
\end{slide}

\section{Características do Git}
\begin{slide}
    \begin{itemize}
        \item Descentralizado
        \begin{itemize}
            \pause
            \item Cada pessoa (ou computador) contém uma cópia completa do
                repositório
            \pause
            \item Não requer conexão à internet
        \end{itemize}
        \pause
        \item Versionamento do conjunto de artefatos como um todo
        \begin{itemize}
            \pause
            \item Não há necessidade de controlar o versionamento de cada
                arquivo de forma individual
        \end{itemize}
        \pause
        \item Projetado para melhor funcionamento com arquivos textuais
        \begin{itemize}
            \pause
            \item Algumas funcionalidades são perdidas se arquivos binários
                forem utilizados \pause (.exe\pause, .pdf\pause, .zip\pause,
                ...)
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Conceitos Básicos do Git}
\begin{slide}
    \begin{itemize}
        \item O Git controla um diretório contendo o repositório
        \begin{itemize}
            \pause
            \item O comando \texttt{git init} cria um repositório em uma pasta
        \end{itemize}
        \pause
        \item Dentro da pasta, ele cria uma pasta oculta \emph{.git}
        \begin{itemize}
            \pause
            \item Cópias dos artefatos, dos registros e arquivos internos
        \end{itemize}
        \pause
        \item O Git irá controlar os arquivos da pasta que são artefatos
        \begin{itemize}
            \pause
            \item O arquivo \emph{.gitignore} pode ser usado para definir quais
                arquivos não são artefatos
            \begin{itemize}
                \pause
                \item Arquivos temporários
                \pause
                \item Arquivos gerados a partir dos artefatos
                \pause
                \item Arquivos locais (específicos ao computador atual)
                \pause
                \item Arquivos de segurança (com senhas, por exemplo)
            \end{itemize}
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Controlando o Diretório}
\begin{slide}
    \begin{itemize}
        \item Como o Git controla o diretório do repositório, é preciso ter
            alguns cuidados
        \begin{itemize}
            \pause
            \item Pedir para Git voltar para uma versão anterior sobrescreve os
                artefatos
            \pause
            \item A ideia é trazer a pasta para o estado anterior exatamente
                como ela estava
            \pause
            \item Se as mudanças não forem versionadas antes de realizar este
                tipo de operação, alterações podem ser perdidas
            \pause
            \item Se em uma versão anterior um dado artefato não existia, o
                arquivo será apagado quando se voltar àquela versão
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Índice}
\begin{slide}
    \begin{itemize}
        \item Um local temporário de cópias de artefatos
        \pause
        \item Os arquivos no índice serão usados para formar uma nova versão
        \pause
        \item Comandos importantes
        \begin{itemize}
            \pause
            \item \texttt{git status}
            \pause
            \item \texttt{git add "arquivo"}
            \pause
            \item \texttt{git reset -- "arquivo"}
            \pause
            \item \texttt{git rm "arquivo"}
            \pause
            \item \texttt{git diff --cached}
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Commit}
\begin{slide}
    \begin{itemize}
        \item Representa uma versão do repositório
        \pause
        \item Referencia uma cópia do estado de todos os artefatos em um
            determinando instante de tempo
        \pause
        \item Informações que compõem um \emph{commit}
        \begin{itemize}
            \pause
            \item Cópia dos artefatos \pause (estado)
            \pause
            \item Título e descrição \pause (porquê)
            \pause
            \item Autor \pause (quem)
            \pause
            \item Data \pause (quando)
            \pause
            \item \emph{Commit} pai \pause (rastreabilidade)
        \end{itemize}
        \pause
        \item Comandos importantes
        \begin{itemize}
            \pause
            \item \texttt{git commit}
            \pause
            \item \texttt{git show}
            \pause
            \item \texttt{git checkout}
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Ramificação}
\begin{slide}
    \begin{itemize}
        \item Na teoria, uma ramificação é uma sequência de \emph{commits}
        \begin{itemize}
            \pause
            \item Uma linha de desenvolvimento
        \end{itemize}
        \pause
        \item Na prática é um "ponteiro ambulante"
        \begin{itemize}
            \pause
            \item A ramificação aponta para o \emph{commit} mais atual da linha
                de desenvolvimento
            \pause
            \item A cada novo \emph{commit} acrescentado à ramificação, o
                ponteiro é atualizado automáticamente
        \end{itemize}
        \pause
        \item Comandos (iniciais) importantes
        \begin{itemize}
            \pause
            \item \texttt{git branch "nova\_ramificacao"}
            \pause
            \item \texttt{git checkout "ramificacao"}
            \pause
            \item \texttt{git checkout -b "outra\_nova\_ramificacao"}
        \end{itemize}
        \pause
        \item Todo repositório começa com uma ramificação inicial chamada
            \textbf{master}
    \end{itemize}
\end{slide}

\section{Junção de Ramificações}
\begin{slide}
    \begin{itemize}
        \item Uma utilidade de usar ramificações é poder juntá-las
            posteriormente
        \pause
        \item A maneira mais fácil de fazer isso é usando o comando
            \texttt{git merge outra\_ramificacao}
        \pause
        \item O comando cria um \emph{commit} especial
        \pause
        \item A diferença é que este \emph{commit} tem dois pais
        \begin{itemize}
            \pause
            \item O primeiro é o \emph{commit} atual
            \pause
            \item O segundo é o \emph{commit} juntado
        \end{itemize}
        \pause
        \item Observações
        \begin{itemize}
            \pause
            \item Junta \emph{commits} ao invés de ramificações
            \pause
            \item A ramificação juntada não é apagada
            \pause
            \item A ramificação juntada pode continuar a evoluir posteriormente,
                possivelmente necessitando que outra junção futura
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Junção Sem Commit Especial}
\begin{slide}
    \begin{itemize}
        \item Uma forma de juntar sem o commit especial é refazer todos os
            \emph{commits} de uma ramificação em outra
        \pause
        \item Existe um comando que auxilia neste processo
        \begin{itemize}
            \pause
            \item \texttt{git rebase "outra\_ramificacao"}
        \end{itemize}
        \pause
        \item Refaz todos os \emph{commits} da ramificacao atual como se
            tivessem começado após o \emph{commit} especificado
        \pause
        \item A junção é finalizada de forma semelhante á junção normal, porém o
            Git detecta que não há necessidade de criar o \emph{commit} especial
        \pause
        \item Exemplo
        \begin{itemize}
            \pause
            \item \texttt{git checkout ramificacao}
            \pause
            \item \texttt{git rebase master}
            \pause
            \item \texttt{git checkout master}
            \pause
            \item \texttt{git merge ramificacao}
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Junção Avançada}
\begin{slide}
    \begin{itemize}
        \item Existe uma versão interativa do comando \emph{rebase}\pause:
            \texttt{git rebase -i "ramificacao"}
        \pause
        \item Ele permite alterar os \emph{commits} que serão refeitos
        \begin{itemize}
            \pause
            \item Alterar a ordem
            \pause
            \item Pular \emph{commits}
            \pause
            \item Re-escrever a descrição de \emph{commits}
            \pause
            \item Juntar dois ou mais \emph{commits} em um só
        \end{itemize}
        \pause
        \item Um dos comandos mais poderosos
    \end{itemize}
\end{slide}

\section{Resolução de Conflitos}
\begin{slide}
    \begin{itemize}
        \item Pode ocorrer de um mesmo arquivo for alterado por dois
            \emph{commits} diferentes que serão juntados
        \pause
        \item O Git tentará resolver os conflitos automaticamente
        \pause
        \item Se não conseguir, indicará no arquivo os problemas
        \begin{itemize}
            \pause
            \item \texttt{<<<<<<<}
            \item \texttt{Lorem ipsum dolor sit amet, consectetur adipiscing
                elit.}
            \item \texttt{=======}
            \item \texttt{Nam fermentum tristique massa sit amet dictum.}
            \item \texttt{>>>>>>>}
        \end{itemize}
        \pause
        \item Basta resolver os problemas e adicionar ao índice
        \begin{itemize}
            \pause
            \item Possivelmente rodar \texttt{git rebase --continue}
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Visualizando o Histórico}
\begin{slide}
    \begin{itemize}
        \item O comando \texttt{git log} percorre todos os \emph{commits} a
            partir do \emph{commit} atual
        \pause
        \item Algumas opções podem ser úteis
        \begin{itemize}
            \pause
            \item \texttt{--oneline} Mostra somente o título
            \pause
            \item \texttt{--decorate} Mostra os "ponteiros" encontrados no
                caminho
            \pause
            \item \texttt{--all} Começa a percorrer a partir de todos os
                ponteiros, na tentativa de montar a árvore completa do histórico
            \pause
            \item \texttt{--graph} Desenha linhas ligando os \emph{commits} a
                seus pais, evidenciando as ramificações e as junções
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Visualizando Diferenças}
\begin{slide}
    \begin{itemize}
        \item Para arquivos textuais, o comando \texttt{git diff} permite
            mostrar a diferenças entre versões
        \pause
        \item Sem argumentos, mostra a diferença entre o estado atual da pasta
            e o índice
        \pause
        \item \texttt{git diff --cached} Mostra a diferença entre o índice e o
            \emph{commit} atual
        \pause
        \item \texttt{git diff primeiro..segundo} Mostra a diferença entre o
            primeiro e o segundo \emph{commit}
        \pause
        \item Se o comando terminar em \texttt{-- arquivo1 arquivo2
            pasta/arquivo3}, somente as diferenças destes arquivos serão
            mostradas
    \end{itemize}
\end{slide}

\section{Ponteiros Fixos}
\begin{slide}
    \begin{itemize}
        \item Ponteiros fixos podem ser criados, chamados rótulos
        \pause
        \item \texttt{git tag "rotulo"}
        \pause
        \item Útil para demarcar eventos importantes
        \begin{itemize}
            \pause
            \item Versões compartilhadas
            \pause
            \item Versões usadas para testes
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Repositórios Remotos}
\begin{slide}
    \begin{itemize}
        \item Repositórios remotos podem ser referenciados
        \pause
        \item \emph{Commits} e ponteiros podem ser trocados entre os
            repositórios
        \pause
        \item Cada ponteiro presente no repositório remoto é copiado para o
            repositório local, prefixado com o nome do repositório
            \begin{itemize}
                \pause
                \item Exemplo: \textbf{repositorio/master}
            \end{itemize}
        \pause
        \item Comandos importantes
        \begin{itemize}
            \pause
            \item \texttt{git clone "url"} Cria um novo repositório, copiando um
                outro repositório
            \pause
            \item \texttt{git remote add "nome" "url"} Acrescenta o registro de
                um repositório remoto
            \pause
            \item \texttt{git remote rm "nome"} Remove o registro de um
                repositório remote
            \pause
            \item \texttt{git push "repositorio" "ponteiro"} Envia o ponteiro e
                os \emph{commits} necessários para o repositório remoto
            \pause
            \item \texttt{git fetch "repositorio"} Atualiza os ponteiros locais
                do estado dos ponteiros remotos
        \end{itemize}
    \end{itemize}
\end{slide}

\section{Considerações Finais}
\begin{slide}
    \begin{itemize}
        \item Para o Git saber quem colocar como autor dos \emph{commits}, é
            preciso rodar os comandos abaixo logo após a instalação
            \begin{itemize}
                \pause
                \item \texttt{git config --global user.name "Nome Completo"}
                \item \texttt{git config --global user.email "email@local.com"}
            \end{itemize}
        \pause
        \item \emph{Commits} curtos e específicos são melhores
        \pause
        \item Uso de ramificações para organização depende do gosto dos usuários
        \begin{itemize}
            \pause
            \item Pode-se fazer uma ramificação por conjunto de mudanças
            \pause
            \item Pode-se manter somente uma ramificação central, usando outras
                de forma temporária na máquina local
        \end{itemize}
        \pause
        \item A ferramenta não resolve o problema sozinha
    \end{itemize}
\end{slide}

\end{document}
